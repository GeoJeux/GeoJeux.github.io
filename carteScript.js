var tblPays = [
  ["CANADA","nord","<img class='image' src='image/Drapeau/Canada.jpg.png'>","<img class='image' src='image/Canada.png'>","indice1","indice2","indice3"],
  ["ÉTATS-UNIS","nord","<img class='image' src='image/Drapeau/États-unis.jpg.png'>","<img class='image' src='image/États-Unis.png'>","indice1","indice2","indice3"],
  ["MEXIQUE","nord","<img src='image/Drapeau/Mexique.jpg.png' class='image'>","<img class='image' src='image/Mexique.png'>","indice1","indice2","indice3"],
  ["FRANCE","europe","<img class='image' src='image/Drapeau/France.jpg.png'>","<img class='image' src='image/France.png'>","indice1","indice2","indice3"],
  ["ALLEMAGNE","europe","<img class='image' src='image/Drapeau/Allemagne.jpg.png'>","<img class='image' src='image/Allemagne.png'>","indice1","indice2","indice3"],
  ["ESPAGNE","europe","<img class='image' src='image/Drapeau/Espagne.jpg.png'>","<img class='image' src='image/Espagne.png'>","indice1","indice2","indice3"],
  ["ROYAUME-UNI","europe","<img class='image' src='image/Drapeau/Royaume-Uni.jpg.png'>","<img class='image' src='image/Royaume-Uni.png'>","indice1","indice2","indice3"],
  ["POLOGNE","europe","<img class='image' src='image/Drapeau/Pologne.jpg.png'>","<img class='image' src='image/Pologne.png'>","indice1","indice2","indice3"],
  ["RUSSIE","europe","<img class='image' src='image/Drapeau/Russie.jpg.png'>","<img class='image' src='image/Russie.png'>","indice1","indice2","indice3"],
  ["PORTUGAL","europe","<img class='image' src='image/Drapeau/Portugal.jpg.png'>","<img class='image' src='image/Portugal.png'>","indice1","indice2","indice3"],
  ["ITALIE","europe","<img class='image' src='image/Drapeau/Italie.jpg.png'>","<img class='image' src='image/Italie.png'>","indice1","indice2","indice3"],
  ["UKRAINE","europe","<img class='image' src='image/Drapeau/Ukraine.jpg.png'>","<img class='image' src='image/Ukraine.png'>","indice1","indice2","indice3"],
  ["TURKIYE","europe","<img class='image' src='image/Drapeau/Turkiye.jpg.png'>","<img class='image' src='image/Turkiye.png'>","indice1","indice2","indice3"],
  ["DANEMARK","europe","<img class='image' src='image/Drapeau/Danemark.jpg.png'>","<img class='image' src='image/Danemark.png'>","indice1","indice2","indice3"],
  ["PAYS-BAS","europe","<img class='image' src='image/Drapeau/Pays-bas.jpg.png'>","<img class='image' src='image/Pays-bas.png'>","indice1","indice2","indice3"],
  ["FINLANDE","europe","<img class='image' src='image/Drapeau/Finlande.jpg.png'>","<img class='image' src='image/Finlande.png'>","indice1","indice2","indice3"],
  ["NORVÈGE","europe","<img class='image' src='image/Drapeau/Norvège.jpg.png'>","<img class='image' src='image/Suède.png'>","indice1","indice2","indice3"],
  ["SUÈDE","europe","<img class='image' src='image/Drapeau/Suède.jpg.png'>","<img class='image' src='image/Norvège.png'>","indice1","indice2","indice3"],
  ["CROATIE","europe","<img class='image' src='image/Drapeau/Croatie.jpg.png'>","<img class='image' src='image/Croatie.png'>","indice1","indice2","indice3"],
  ["GRÈCE","europe","<img class='image' src='image/Drapeau/Grèce.jpg.png'>","<img class='image' src='image/Grèce.png'>","indice1","indice2","indice3"],
  ["SUISSE","europe","<img class='image' src='image/Drapeau/Suisse.jpg.png'>","<img class='image' src='image/Suisse.png'>","indice1","indice2","indice3"],
  ["AUTRICHE","europe","<img class='image' src='image/Drapeau/Autriche.jpg.png'>","<img class='image' src='image/Autriche.png'>","indice1","indice2","indice3"],
  ["CHINE","asie","<img class='image' src='image/Drapeau/Chine.jpg.png'>","<img class='image' src='image/Chine.png'>","indice1","indice2","indice3"],
  ["RUSSIE","asie","<img class='image' src='image/Drapeau/Russie.jpg.png'>","<img class='image' src='image/Russie.png'>","indice1","indice2","indice3"],
  ["MONGOLIE","asie","<img class='image' src='image/Drapeau/Mongolie.jpg.png'>","<img class='image' src='image/Mongolie.png'>","indice1","indice2","indice3"],
  ["CORÉE DU SUD","asie","<img class='image' src='image/Drapeau/Corée du sud.jpg.png'>","<img class='image' src='image/Corée du sud.png'>","indice1","indice2","indice3"],
  ["CORÉE DU NORD","asie","<img class='image' src='image/Drapeau/Corée du nord.jpg.png'>","<img class='image' src='image/Corée du nord.png'>","indice1","indice2","indice3"],
  ["INDONÉSIE","asie","<img class='image' src='image/Drapeau/Indonésie.jpg.png'>","<img class='image' src='image/Indonésie.png'>","indice1","indice2","indice3"],
  ["PHILIPPINES","asie","<img class='image' src='image/Drapeau/Philippines.jpg.png'>","<img class='image' src='image/Philippines.png'>","indice1","indice2","indice3"],
  ["INDE","asie","<img class='image' src='image/Drapeau/Inde.jpg.png'>","<img class='image' src='image/Inde.png'>","indice1","indice2","indice3"],
  ["PAKISTAN","asie","<img class='image' src='image/Drapeau/Pakistan.jpg.png'>","<img class='image' src='image/Pakistan.png'>","indice1","indice2","indice3"],
  ["AFGHANISTAN","asie","<img class='image' src='image/Drapeau/Afghanistan.jpg.png'>","<img class='image' src='image/Afghanistan.png'>","indice1","indice2","indice3"],
  ["KAZAKHSTAN","asie","<img class='image' src='image/Drapeau/Kazakhstan.jpg.png'>","<img class='image' src='image/Kasakhstan.png'>","indice1","indice2","indice3"],
  ["OUZBEKISTAN","asie","<img class='image' src='image/Drapeau/Ouzbekistan.jpg.png'>","<img class='image' src='image/Ouzbekistan.png'>","indice1","indice2","indice3"],
  ["TURKMÉNISTAN","asie","<img class='image' src='image/Drapeau/Turkménistan.jpg.png'>","<img class='image' src='image/Turkmenitsan.png'>","indice1","indice2","indice3"],
  ["TAJIKISTAN","asie","<img class='image' src='image/Drapeau/Tajikistan.jpg.png'>","<img class='image' src='image/Tajikistan.png'>","indice1","indice2","indice3"],
  ["KIRGHIZISTAN","asie","<img class='image' src='image/Drapeau/Kirghizistan.jpg.png'>","<img class='image' src='image/Kirghizistan.png'>","indice1","indice2","indice3"],
  ["LIBAN","asie","<img class='image' src='image/Drapeau/Liban.jpg.png'>","<img class='image' src='image/Liban.png'>","indice1","indice2","indice3"],
  ["ISRAËL","asie","<img class='image' src='image/Drapeau/Israel.jpg.png'>","<img class='image' src='image/Israel.png'>","indice1","indice2","indice3"],
  ["GÉORGIE","asie","<img class='image' src='image/Drapeau/Géorgie.jpg.png'>","<img class='image' src='image/Géorgie.png'>","indice1","indice2","indice3"],
  ["ARABIE SAOUDITE","asie","<img class='image' src='image/Drapeau/Arabie Saoudite.jpg.png'>","<img class='image' src='image/Arabie Saoudite.png'>","indice1","indice2","indice3"],
  ["KUWAIT","asie","<img class='image' src='image/Drapeau/Kuwait.jpg.png'>","<img class='image' src='image/Kuwait.png'>","indice1","indice2","indice3"],
  ["QATAR","asie","<img class='image' src='image/Drapeau/Qatar.jpg.png'>","<img class='image' src='image/Qatar.png'>","indice1","indice2","indice3"],
  ["VIETNAM","asie","<img class='image' src='image/Drapeau/Vietnam.jpg.png'>","<img class='image' src='image/Vietnam.png'>","indice1","indice2","indice3"],
  ["THAILANDE","asie","<img class='image' src='image/Drapeau/Thailande.jpg.png'>","<img class='image' src='image/Thailande.png'>","indice1","indice2","indice3"],
  ["SINGAPORE","asie","<img class='image' src='image/Drapeau/Singapore.jpg.png'>","<img class='image' src='image/Singapore.png'>","indice1","indice2","indice3"],
  ["LAOS","asie","<img class='image' src='image/Drapeau/Laos.jpg.png'>","<img class='image' src='image/Laos.png'>","indice1","indice2","indice3"],
]
var continent;
var niveau = 0;
var vies = 3
var pays;
var nbIndice = 0;
var score = 0;
var max;
var typeJeux;

function genere() {
  pays = Math.floor(Math.random() * tblPays.length);
  
  if(continent != null){
    switch (niveau){
      case 1:
        while ((pays > 16)||(tblPays[pays][1] != continent)){
           pays = Math.floor(Math.random() * tblPays.length); 
        };
        break;
      case 2:
        while ((pays > 32)||(pays < 17)&&(tblPays[pays][1] != continent)){
           pays = Math.floor(Math.random() * tblPays.length); 
        };
        break;
      case 3:
        while ((pays < 33)||(tblPays[pays][1] != continent)){
           pays = Math.floor(Math.random() * tblPays.length); 
        };
        break;
      }
    } else {
      switch (niveau){
        case 1:
          while (pays > 16){
             pays = Math.floor(Math.random() * tblPays.length); 
          };
          break;
        case 2:
          while ((pays > 32)||(pays < 17)){
             pays = Math.floor(Math.random() * tblPays.length); 
          };
          break;
        case 3:
          while (pays < 33){
             pays = Math.floor(Math.random() * tblPays.length); 
          }
          break;
      }
    }

 nbIndice = 0;
  var carte = document.querySelector(".carte");
  carte.innerHTML = tblPays[pays][typeJeux]; 
}
  
function jouer(){
  var message = "<div id='vies'></div><div id='score'></div>\
    <div id='stop'><input type='button' value='Arrêter' onclick='arrete()'></div>\
    <div class='carte'></div>\
    <div class='emptySpace'></div>\
    <div>\
      <input type='text' id='guess'>\
      <input type='button' value='Deviner' id='devine' onclick='devine()'>\
      <div id='erreurs'></div>\
      <input type='button' value='Indice' id='indice' onmouseover='indice()' onmouseleave='popup'>\
      <div id='indice'  class='popup'><span class='popuptext' id='myPopup'></span></div>\
    </div>\
    <div class='emptySpace'></div>"
  var affiche = document.getElementById("jeux")
  affiche.innerHTML = message;

  document.getElementById("guess").focus()

  var affiche = document.getElementById("score");
  affiche.innerHTML = "Score : " + score;

  lives();
  genere();
}

function devine(){
  var essaie = document.getElementById("guess").value.toUpperCase().trim(" ");
  if (essaie == tblPays[pays][0]){
    message = "Bravo, vous avez réussit à deviner le bon pays";
    score += 500;
    
    genere()
  } else {
    vies--
    message = "<br>Non, ce n'est pas " + essaie + ". Réessaye<br>";
  }

  
  lives();
  var affiche = document.getElementById("score");
  affiche.innerHTML = "Score : " + score;
  
  document.getElementById("erreurs").innerHTML = message
  var textBox = document.getElementById("guess")
  textBox.value = "";
  
}


function lives(){
  var vieAffiche = document.getElementById("vies");
  var imageHTML = "<img class='coeur' src='https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Heart_coraz%C3%B3n.svg/800px-Heart_coraz%C3%B3n.svg.png'>";
  var vieMessage = "";
  
  if (vies > 0){
    for (var i = 0; i < vies; i++) {
      vieMessage += imageHTML;
    }
  } else {
    popUp = document.createElement("div");
    popUp.id = 'gameOver';
    popUp.innerHTML = "Game Over<br>Vous avez perdu<br>Votre score est de <br><h1>" + score + "<h1><br><input type='button' value='Rejouer' onclick='location.reload();'></a><a href='url à score page'><input type='button' value='Quitter'<a>";
    document.body.appendChild(popUp);
  }
  vieAffiche.innerHTML = "Vies: " + vieMessage;
}

function indice(){
  var indice = document.getElementById("myPopup");

  if (nbIndice == 0){
    indice.innerHTML = tblPays[pays][4];
  }else if(nbIndice == 1){
    indice.innerHTML = tblPays[pays][5];
  } else if (nbIndice == 2){
    indice.innerHTML = tblPays[pays][6] + "km²";
  } else if (nbIndice == 3){
    indice.innerHTML = "<br>Vous n'avez plus le droit aux indices.<br>"
  }
  nbIndice += 0.5
  popup()
}

function arrete(){
  vies = 0;
  lives()
}


function popup() {
  var popup = document.getElementById("myPopup");
  popup.classList.toggle("show");
}

function facile(){
  niveau = 1;
  document.getElementById("facile").style.backgroundColor = "rgb(24, 114, 139)";
  document.getElementById("moyen").style.backgroundColor = "transparent";
  document.getElementById("difficile").style.backgroundColor = "transparent";
}

function moyen(){
  niveau = 2;
  document.getElementById("facile").style.backgroundColor = "transparent";
  document.getElementById("moyen").style.backgroundColor = "rgb(24, 114, 139)";
  document.getElementById("difficile").style.backgroundColor = "transparent";
}

function difficile(){
  niveau = 3;
  document.getElementById("facile").style.backgroundColor = "transparent";
  document.getElementById("moyen").style.backgroundColor = "transparent";
  document.getElementById("difficile").style.backgroundColor = "rgb(24, 114, 139)";
}

function nord(){
  continent = "nord";
  document.getElementById("nord").style.backgroundColor = "rgb(24, 114, 139)";
  document.getElementById("sud").style.backgroundColor = "transparent";
  document.getElementById("europe").style.backgroundColor = "transparent";
  document.getElementById("asie").style.backgroundColor = "transparent";
  document.getElementById("afrique").style.backgroundColor = "transparent";
  document.getElementById("oceanie").style.backgroundColor = "transparent";
}

function sud(){
  continent = "sud";
  document.getElementById("nord").style.backgroundColor = "transparent";
  document.getElementById("sud").style.backgroundColor = "rgb(24, 114, 139)";
  document.getElementById("europe").style.backgroundColor = "transparent";
  document.getElementById("asie").style.backgroundColor = "transparent";
  document.getElementById("afrique").style.backgroundColor = "transparent";
  document.getElementById("oceanie").style.backgroundColor = "transparent";
}

function afrique(){
  continent = "afrique";
  document.getElementById("nord").style.backgroundColor = "transparent";
  document.getElementById("sud").style.backgroundColor = "transparent";
  document.getElementById("europe").style.backgroundColor = "transparent";
  document.getElementById("asie").style.backgroundColor = "transparent";
  document.getElementById("afrique").style.backgroundColor = "rgb(24, 114, 139)";
  document.getElementById("oceanie").style.backgroundColor = "transparent";
}

function europe(){
  continent = "europe";
  document.getElementById("nord").style.backgroundColor = "transparent";
  document.getElementById("sud").style.backgroundColor = "transparent";
  document.getElementById("europe").style.backgroundColor = "rgb(24, 114, 139)";
  document.getElementById("asie").style.backgroundColor = "transparent";
  document.getElementById("afrique").style.backgroundColor = "transparent";
  document.getElementById("oceanie").style.backgroundColor = "transparent";
}

function asie(){
  continent = "asie";
  document.getElementById("nord").style.backgroundColor = "transparent";
  document.getElementById("sud").style.backgroundColor = "transparent";
  document.getElementById("europe").style.backgroundColor = "transparent";
  document.getElementById("asie").style.backgroundColor = " rgb(24, 114, 139)";
  document.getElementById("afrique").style.backgroundColor = "transparent";
  document.getElementById("oceanie").style.backgroundColor = "transparent";
}

function oceanie(){
  continent = "oceanie";
  document.getElementById("nord").style.backgroundColor = "transparent";
  document.getElementById("sud").style.backgroundColor = "transparent";
  document.getElementById("europe").style.backgroundColor = "transparent";
  document.getElementById("asie").style.backgroundColor = "transparent";
  document.getElementById("afrique").style.backgroundColor = "transparent";
  document.getElementById("oceanie").style.backgroundColor = "rgb(24, 114, 139)";
}


function shapes(){
  typeJeux = 3;
  document.getElementById("drapeau").style.backgroundColor = "transparent";
  document.getElementById("silhouette").style.backgroundColor = "rgb(24, 114, 139)";
}

function drapeau(){
  typeJeux = 2;
  document.getElementById("drapeau").style.backgroundColor = "rgb(24, 114, 139)";
  document.getElementById("silhouette").style.backgroundColor = "transparent";
}
